---
copyright:
years: 2024
lastupdated: "2024-04-16"

subcollection: pattern-webapp-openshift-vpc

keywords:
# The release that the reference architecture describes

authors:
- name: Joe Kiernan, Sivarajan Ravisankar, Adam Geiger, Rob Tallotta, Gobinda Sahaa, David Long.
---
<!--
Don't include "reference architecture" in the following title.
Specify a title based on a use case. If the architecture has a module
or tile in the IBM Cloud catalog, match the title to the catalog. See
https://test.cloud.ibm.com/docs/solution-as-code?topic=solution-as-code-naming-guidance.
-->

# Web-application on OpenShift on VPC 

{: #openshift-on-vpc}
{: toc-content-type="reference-architecture"}
{: toc-version="1.0"}

<!--
The IDs, such as {: #title-id} are required for publishing this reference architecture in IBM Cloud Docs. Set unique IDs for each heading. Also include
the toc attributes on the H1, repeating the values from the YAML header.
 -->



## Architecture diagram

{: #architecture-diagram}


![A diagram of a computer network Description automatically
generated](./image/2b4a6209bfdd026fbdbe4b80d5a0613d.jpg)

Figure 1 `<!Reference Architecture for cluster design of E-commerce microservices solution->`


Figure 2 illustrates ....overview text here.

![A diagram of a computer network Description automatically
generated](./image2.png)

Figure 2

figure 2 detailed diagram description here

## Design scope

{: #design-scope}

Following the [Architecture Framework](https://test.cloud.ibm.com/docs-draft/architecture-framework?topic=architecture-framework-taxonomy), SAP on VPC covers design considerations and architecture decisions for the following aspects and domains:

<!-- include all aspectsand domains relavant to the pattern below -->

- **Compute:** Bare Metal and Virtual infrastructure
- **Storage:** Primary, Backup, Archive and Migration
- **Networking:** Enterprise Connectivity, Edge Gateways, Segmentation and Isolation, Cloud Native Connectivity and Load Balancing
- **Security:** Data, Identity and Access Management, Infrastructure and Endpoint, Threat Detection and Response
- **Resiliency:** Backup and Restore, Disaster Recovery, High Availability
- **Service Management:** Monitoring, Logging, Alerting, Management/Orchestration

The Architecture Framework, described in [Introduction to the Architecture Framework](https://cloud.ibm.com/docs/architecture-framework?topic=architecture-framework-intro), provides a consistent approach to design cloud solutions by addressing requirements across a pre-defined set of aspects and domains, which are technology-agnostic architectural areas that need to be considered for any enterprise solution. It can be used as a guide to make the necessary design and component choices to ensure you have considered applicable requirements for each aspect and domain. After you have identified the applicable requirements and domains that are in scope, you can evaluate and select the best fit for purpose components for your enterprise cloud solution.

The Figure 3 shows the domains that are covered in this solution.

<!-- use the draw.io framework template to create your heatmap image, located here https://ibm.ent.box.com/file/1389368500379 -->

![A diagram of a computer network Description automatically
generated](./image3.png)

Figure 3

## Requirements

{: #requirements}

<!-- insert the requirements table, below is an example -->

The following represents a baseline set of requirements which we believe are applicable to most clients and critical to successful OpenShift deployment.
| **Aspect**         | **Requirement**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |   |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|
| Compute            | Provide appropriate levels of and memory to match the workloads of the  E-commerce solution as described in the non-functional requirements section.   The solution requires a managed container platform.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |   |
| Network            | Establish clear network segmentation between public-facing components and backend systems, enforcing strict access controls and reducing the attack surface.  Provide network isolation with the ability to separate applications based on attributes such as data classification, public (Internet facing) versus internal services and business functions.  Network connectivity to IBM Cloud data centers to provide access to monitor & manage the application’s IaaS/PaaS from the customer’s premise to the operations teams.  Ensure low latency and high throughput to deliver a seamless shopping experience, minimizing page load times and providing swift access to content across geographical locations.  The E-Commerce application should deliver web content, such as images, videos, scripts and other assets with improved performance, reliability, and scalability to geographically distributed users.   The components of the E-Commerce application are broken down into smaller, independent services that leverages cloud services which enhances connectivity, scalability, and resilience.  Each service can be developed, deployed, and scaled independently. Managing the complexity of communication between each service providing features like load balancing, tracing, and monitoring.  Implement redundancy measures (e.g., multiple data centers, server clusters) to ensure continuous service availability, with failover mechanisms in place to mitigate downtime.  Ensure robust security measures, including firewalls, intrusion detection and prevention systems, and encryption protocols, to protect data in transitaintain the integrity of the network.  |   |
| Storage            | Utilize high-performance storage solutions.  Employ caching mechanisms to reduce latency for frequently accessed data.  Implement workload optimization techniques to ensure efficient resource utilization.  Utilize containerized architecture such as OpenShift to easily scale resources horizontally.  Implement auto-scaling mechanisms to automatically adjust resources based on workload demands.  Utilize cloud-native database solutions that support horizontal scaling.  Configure multi-zone or multi-region replication for data redundancy and failover capabilities.  Implement automated failover mechanisms to minimize downtime in case of failures.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |   |
| Resiliency         |  The E-Commerce application should deliver web content, such as images, videos, scripts and other assets with improved performance, reliability, and scalability to geographically distributed users.   The solution must be highly available and meet a 99.99% Service Level Agreement  standard.  Implement automated, schedule-based backup solutions for capturing persistent volumes, configurations, and data across the entire OpenShift cluster.  Enable customizable backup frequencies aligned with different application RPO requirements.  Utilize IBM Clouds highly available storage options for storing backup data.  Ensure backup data replication across multiple geographic locations to enhance data durability and availability.  Implement cross-region or multi-zone storage replication for data availability during zone or region failure.  Develop a comprehensive disaster recovery plan outlining steps for application and data recovery to minimize downtime and data loss, meeting RTO and RPO requirements.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |   |
| Security           | Provide data encryption at rest with worker node disk encryption.  Provide secure data in transit using SSL/TLS certificates  Provide IAM Services for platform operations, developers, application users, service accounts  and cloud administrators.  Provide restricted internet access from Production to enable middleware or operator updates  Provide sec access cloud resources Provide private repository for signed images with image vulnerability scans.  Firewalls must be restrictively configured to provide advanced security features and prevent all traffic, both inbound and outbound, except that which is specifically required, documented, and approved and include IPS/IDS services  Provide for segregation of duties that developers do not have access to production.  Provide for isolation between Production and Nonproduction environments.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |   |
| Service management | The solution will provide performance tuning capabilities and integrate with  cloud monitoring services to ensure SLA’s and end user experience is  optimized.  Implement real-time monitoring tools for storage performance, resource utilization, and operational health, integrating with IBM Cloud Monitoring.  Deploy a logging solution to capture and store logs from storage nodes, pods, and containers, including data access logs, system events, and error logs, integrating with IBM Cloud Log Analysis.  Establish a proactive alerting mechanism to notify administrators of critical issues, potential bottlenecks, or system failures, integrating with IBM Cloud Event Management for customizable thresholds and incident escalation paths.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |   |
|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |   |
| Other requirements | Client wants to migrate and modernize their E-commerce solution from  traditional to microservices based architecture.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |   |

Table 1. *E-commerce microservices cluster design requirements*


                                                                                                                                                                                                                                                                                                  |

## Components

{: #components}

<!-- insert the components list, below is an example -->

| Aspect                                                                                                 | Component                                                                                                                                                                                                                                                                                                                                                                                                            | How the component is used                                                                |
| ------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| Compute                                                                                                | [VPC VSIs](https://cloud.ibm.com/vpc-ext/provision/vs)                                                                                                                                                                                                                                                                                                                                                                  | NetWeaver and HANA DB                                                                    |
| Storage                                                                                                | [VPC Block Storage](https://cloud.ibm.com/docs/openshift?topic=openshift-vpc-block)                                                                                                                                                                                                                                                                                                                                     | NetWeaver and HANA DB servers primary storage. Backup storage                            |
|                                                                                                        | [Cloud Object Storage](https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-about-cloud-object-storage)                                                                                                                                                                                                                                                                                           | Backup and archive, application logs, operational logs and audit logs                    |
| Networking                                                                                             | [VPC Virtual Private Network (VPN)](https://cloud.ibm.com/docs/iaas-vpn?topic=iaas-vpn-getting-started)                                                                                                                                                                                                                                                                                                                 | Remote access to manage resources in private network                                     |
|                                                                                                        | [Virtual Private Gateway &amp; Virtual Private Endpoint (VPE)](https://cloud.ibm.com/docs/vpc?topic=vpc-about-vpe)                                                                                                                                                                                                                                                                                                      | For private network access to Cloud Services, e.g. Key Protect, COS, etc.                |
|                                                                                                        | [VPC Load Balancers](https://cloud.ibm.com/docs/vpc?topic=vpc-load-balancers)                                                                                                                                                                                                                                                                                                                                           | Application Load Balancing for web servers, app servers, and database servers            |
|                                                                                                        | Public Gateway                                                                                                                                                                                                                                                                                                                                                                                                       | For web server access to the internet                                                    |
|                                                                                                        | [Cloud Internet Services (CIS)](https://cloud.ibm.com/docs/cis?topic=cis-getting-started)                                                                                                                                                                                                                                                                                                                               | Public Load balancing and DDoS of web servers traffic across zones in the region         |
|                                                                                                        | [DNS Services](https://cloud.ibm.com/docs/dns-svcs?topic=dns-svcs-about-dns-services)                                                                                                                                                                                                                                                                                                                                   |                                                                                          |
|                                                                                                        | [VPCs and subnets](https://cloud.ibm.com/docs/vpc?topic=vpc-about-subnets-vpc&interface=ui)                                                                                                                                                                                                                                                                                                                             | Network Segmentation/Isolation                                                           |
|                                                                                                        | [Transit Gateway](https://cloud.ibm.com/docs/transit-gateway?topic=transit-gateway-about)                                                                                                                                                                                                                                                                                                                               | Connect across multiple VPCs                                                             |
|                                                                                                        | [IBM Cloud Application Load Balancer](https://cloud.ibm.com/docs/vpc?topic=vpc-load-balancers-about) (ALB) \n SAP Web Dispatcher                                                                                                                                                                                                                                                                                        | Load balancing workloads across multiple workload instances over the private network     |
| Security                                                                                               | [Block Storage encryption](https://cloud.ibm.com/docs/vpc?topic=vpc-mng-data&interface=ui) with provider keys                                                                                                                                                                                                                                                                                                           | Block Storage Encryption at rest                                                         |
|                                                                                                        | Cloud Object Storage Encryption                                                                                                                                                                                                                                                                                                                                                                                      | Cloud Object Storage Encryption at rest                                                  |
|                                                                                                        | HANA Data Volume Encryption (DVE)                                                                                                                                                                                                                                                                                                                                                                                    | HANA Database Encryption at rest                                                         |
|                                                                                                        | [IAM](https://cloud.ibm.com/docs/account?topic=account-cloudaccess)                                                                                                                                                                                                                                                                                                                                                     | IBM Cloud Identity & Access Management                                                   |
|                                                                                                        | Privileged Identity and Access Management                                                                                                                                                                                                                                                                                                                                                                            | BYO Bastion host (or Privileged Access Gateway) with PAM SW deployed in Edge VPC         |
|                                                                                                        | [BYO Bastion Host on VPC VSI with PAM SW](https://cloud.ibm.com/docs/framework-financial-services?topic=framework-financial-services-vpc-architecture-connectivity-bastion-tutorial-teleport)                                                                                                                                                                                                                           | Remote access with Privileged Access Management                                          |
|                                                                                                        | [Virtual Private Clouds (VPCs), Subnets, Security Groups, ACLs](https://cloud.ibm.com/docs/vpc?topic=vpc-getting-started)                                                                                                                                                                                                                                                                                               | Core Network Protection                                                                  |
|                                                                                                        | [Cloud Internet Services (CIS)](https://cloud.ibm.com/docs/cis?topic=cis-getting-started)                                                                                                                                                                                                                                                                                                                               | DDoS protection and Web App Firewall                                                     |
|                                                                                                        | One of the following: \n -[Fortigate](https://cloud.ibm.com/catalog/content/ibm-fortigate-AP-HA-terraform-deploy-5dd3e4ba-c94b-43ab-b416-c1c313479cec-global) \n - [Juniper vSRX](https://cloud.ibm.com/catalog/content/juniper-vsrx-catalog-deploy-1.4-dc1e707c-33dd-4321-b2a5-c22dbf0dd0ee-global) \n -[Palo Alto](https://cloud.ibm.com/catalog/content/ibmcloud-vmseries-1.9-6470816d-562d-4627-86a5-fe3ad4e94b30-global) | - IPS/IDS protection at all ingress/egress \n- Unified Threat Management (UTM) Firewall  |
| Resiliency                                                                                             | HANA System Replication (HSR)                                                                                                                                                                                                                                                                                                                                                                                        | Provide 99.95% availability for HANA DB                                                  |
|                                                                                                        | [Veeam](https://cloud.ibm.com/docs/vpc?topic=vpc-about-veeam)                                                                                                                                                                                                                                                                                                                                                           | Controls both the backups and restores of all VSIs or BMs. Veeam Backup & Replication 12 |
| Service Management (Observability)                                                                     | [IBM Cloud Monitoring](https://cloud.ibm.com/docs/monitoring?topic=monitoring-about-monitor)                                                                                                                                                                                                                                                                                                                            | Apps and operational monitoring                                                          |
|                                                                                                        | [IBM Log Analysis](https://cloud.ibm.com/docs/log-analysis?topic=log-analysis-getting-started)                                                                                                                                                                                                                                                                                                                          | Apps and operational logs                                                                |
| {: caption="Table 2. Components" caption-side="bottom"} <!-- each table MUST have a caption attribute> |                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                          |

As mentioned earlier, the Architecture Framework is used to guide and determine the applicable aspects and domains for which architecture decisions need to be made. The following sections contain the considerations, and architecture decisions for the aspects and domains that are in play in this solution pattern.
